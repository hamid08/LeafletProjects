<!DOCTYPE html>
<html>

<head>
	<title>Geolocation</title>

    <!-- https://github.com/perliedman/leaflet-routing-machine -->
    <!-- https://www.liedman.net/leaflet-routing-machine/api/#l-routing-localization -->

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" />

	<link rel="stylesheet" href="dist/leaflet-routing-machine.css" />

	<style>
		body {
			margin: 0;
			padding: 0;
		}
	</style>

</head>

<body>
	<div id="map" style="width:100%; height: 100vh"></div>


	<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>

	<script src="dist/leaflet-routing-machine.js"></script>


	<script>

		var map = L.map('map').setView([36.637833, 51.480458], 11);
		mapLink = "<a href='http://openstreetmap.org'>OpenStreetMap</a>";
		L.tileLayer('http://map.separta.ir/tile/{z}/{x}/{y}.png', { attribution: 'Leaflet &copy; ' + mapLink + ', contribution', maxZoom: 18 }).addTo(map);

//Basic Example


L.Routing.control({
    waypoints: [
        L.latLng(29.622838, 52.534288),
        L.latLng(29.613926, 52.484949)
    ],
    language: 'fr',
    routeWhileDragging: true,
    reverseWaypoints: true,
    showAlternatives: true,
    altLineOptions: {
        styles: [
            {color: 'black', opacity: 0.15, weight: 9},
            {color: 'white', opacity: 0.8, weight: 6},
            {color: 'blue', opacity: 0.5, weight: 2}
        ]
    }
}).addTo(map);



		// var taxiIcon = L.icon({
		// 	iconUrl: 'img/taxi.png',
		// 	iconSize: [70, 70]
		// })

		// var marker = L.marker([29.547830559724613, 52.601873874664314], { icon: taxiIcon }).addTo(map);


		// map.on('click', function (e) {
		// 	console.log("e"+e)
		// 	var newMarker = L.marker([e.latlng.lat, e.latlng.lng]);

        //    var  circle = L.circle([e.latlng.lat, e.latlng.lng], {radius: 50})

        //    var featureGroup = L.featureGroup([marker, circle]).addTo(map)

        //    map.fitBounds(featureGroup.getBounds())

		// 	L.Routing.control({
		// 		waypoints: [
		// 			L.latLng(29.547830559724613, 52.601873874664314),
		// 			L.latLng(e.latlng.lat, e.latlng.lng)
		// 		]
		// 	}).on('routesfound', function (e) {
		// 		var routes = e.routes;
		// 		console.log(routes);

		// 		e.routes[0].coordinates.forEach(function (coord, index) {
		// 			setTimeout(function () {
		// 				marker.setLatLng([coord.lat, coord.lng]);
		// 			}, 100 * index)
		// 		})

		// 	}).addTo(map);
		// });


	</script>


</body>

</html>